<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link
      rel="icon"
      type="image/svg+xml"
      href="/vite.svg"
    />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <title>Vite App</title>
  </head>
  <body>
    <!-- <div id="app"></div> -->
    <div class="container">
      <canvas
        id="canvas"
        width="960"
        height="540"
      ></canvas>
      <video
        id="video"
        width="960"
        height="540"
        style="display: none"
      >
        <source src="" />
      </video>
    </div>
    <link
      rel="stylesheet"
      href="style.css"
    />
    <!-- <script
      type="module"
      src="/main.js"
    ></script> -->
    <!-- Load Tensor Flow -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-core"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-converter"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-webgl"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/pose-detection"></script>

    <!-- Load three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
    <!-- Load scatter-gl.js -->
    <script src="https://cdn.jsdelivr.net/npm/scatter-gl@0.0.13/lib/scatter-gl.min.js"></script>

    <!-- Load tracker.js -->
    <script src="./tracker.js"></script>
    <script>
      // // Initialize game parameters
      // let score = 0;
      // let timeLeft = 60; // 60 seconds
      // let difficulty = 1; // 1 is easy, increases with time
      // let holePosition = {}; // { x: value, y: value }

      // // Generate a random hole on the screen
      // function generateHole() {
      //   const canvasWidth = 960;
      //   const canvasHeight = 540;
      //   holePosition.x = Math.random() * canvasWidth;
      //   holePosition.y = Math.random() * canvasHeight;
      //   // Draw the hole on the canvas
      //   const ctx = document.getElementById("canvas").getContext("2d");
      //   ctx.beginPath();
      //   ctx.arc(holePosition.x, holePosition.y, 50, 0, 2 * Math.PI);
      //   ctx.stroke();
      // }

      // // Check if the player's body aligns with the hole
      // tracker.on("beforeupdate", function (poses) {
      //   // Assuming poses[0] is the player's pose
      //   const playerPose = poses[0];
      //   // Check if the player's body aligns with the hole (simplified)
      //   if (
      //     Math.abs(playerPose.keypoints[0].position.x - holePosition.x) < 50 &&
      //     Math.abs(playerPose.keypoints[0].position.y - holePosition.y) < 50
      //   ) {
      //     score++;
      //     generateHole();
      //   }
      // });

      // // Start the game loop
      // function startGame() {
      //   generateHole();
      //   // Decrease time every second
      //   setInterval(() => {
      //     timeLeft--;
      //     if (timeLeft <= 0) {
      //       endGame();
      //     }
      //   }, 1000);
      // }

      // // End the game
      // function endGame() {
      //   alert("Game Over! Your score: " + score);
      // }

      tracker.setModel("MoveNetSinglePoseLightning");
      tracker.elCanvas = "#canvas";
      tracker.elVideo = "#video";
      console.log("running...");
      tracker.run("camera");
      console.log("running...");
      // tracker.on("beforeupdate", function (poses) {
      //   console.log(poses);
      // });
    </script>
  </body>
</html>
